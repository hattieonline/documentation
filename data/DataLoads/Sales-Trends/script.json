[
    {
        "App":  "Sales-Trends",
        "Section":  "Communities",
        "LoadScriptContent":  [
                                  "///$tab Communities",
                                  "[mstrCommunity]:",
                                  "LOAD",
                                  "*",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_mstrCommunity.qvd]",
                                  "(qvd);"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "dimDate",
        "LoadScriptContent":  [
                                  "///$tab dimDate",
                                  "//\tload only the date field from our fact table. name it to a new field",
                                  "temp:",
                                  "load [%DateKey] as RangeDate\t//\tsource field should be the m/d/yyyy field from your fact table.",
                                  "resident  fact_Sales_Dashboard;",
                                  "",
                                  "//\tMinMaxDate finds the lowest and highest dates from the dates.",
                                  "//\tThis has been proven to work much faster than a typical group by on your transaction table.",
                                  "MinMaxDate:  ",
                                  "load min(RangeDate) as MinDate,  ",
                                  "\tmax(RangeDate) as MaxDate;  ",
                                  "load fieldvalue(\u0027RangeDate\u0027,iterno()) as RangeDate ",
                                  "autogenerate(1) while not isnull(fieldvalue(\u0027RangeDate\u0027,iterno()));  ",
                                  " ",
                                  "drop table temp;\t//\tno need to retain",
                                  "",
                                  "let varMinDate=date(peek(\u0027MinDate\u0027,0,\u0027MinMaxDate\u0027));",
                                  "let varMaxDate=date(peek(\u0027MaxDate\u0027,0,\u0027MinMaxDate\u0027));",
                                  "",
                                  "drop table MinMaxDate;\t//\tno need to retain",
                                  "",
                                  "dimDate:",
                                  "LOAD",
                                  "*",
                                  "FROM [lib://DataShare/QVD Extract\\QVD_Extract_dimDate.qvd]",
                                  "(qvd) where EffectiveDT \u003e=\u0027$(varMinDate)\u0027 and EffectiveDT \u003c=\u0027$(varMaxDate)\u0027;"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "dimELeadCreation",
        "LoadScriptContent":  [
                                  "///$tab dimELeadCreation",
                                  "dimELeadCreation:",
                                  "LOAD",
                                  "    %CommunityKey,",
                                  "    %InquiryID,",
                                  "    eLeadCreationDT,",
                                  "    eLeadCreationTM,",
                                  "    eLeadCreationTMHour,",
                                  "    eLeadCreationDTandTM,",
                                  "    LateNightLeadFlg,",
                                  "    SpeedToLeadFlg",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_factELeadCreationJournalActivity.qvd]",
                                  "(qvd);"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "dimFirstJournalActivity",
        "LoadScriptContent":  [
                                  "///$tab dimFirstJournalActivity",
                                  "dimFirstJournalActivity:",
                                  "LOAD",
                                  "*",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_FirstJournalActivity.qvd]",
                                  "(qvd);"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "dimLastJournalActivity",
        "LoadScriptContent":  [
                                  "///$tab dimLastJournalActivity",
                                  "dimLastJournalActivity:",
                                  "LOAD",
                                  "    %CommunityKey,",
                                  "    %InquiryID,",
                                  "    %InquiryID as LastJournalInquiryID,",
                                  "    lastStep,",
                                  "    LastStepDate,",
                                  "    LastStepAndDT",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_LastJournalActivity.qvd]",
                                  "(qvd);",
                                  "",
                                  "TempLast:",
                                  "LOAD distinct",
                                  "    %InquiryID,",
                                  "    \u0027None\u0027 as lastStep",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_factInquiryByReferral.qvd]",
                                  "(qvd)",
                                  "Where Not Exists(LastJournalInquiryID, %InquiryID);",
                                  "",
                                  "",
                                  "Concatenate(dimLastJournalActivity)",
                                  "Load * Resident TempLast;",
                                  "Drop Table TempLast;",
                                  "Drop Field LastJournalInquiryID from dimLastJournalActivity;"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "dimNextJournalActivity",
        "LoadScriptContent":  [
                                  "///$tab dimNextJournalActivity",
                                  "dimNextJournalActivity:",
                                  "LOAD",
                                  "    %CommunityKey,",
                                  "    %InquiryID,",
                                  "    %InquiryID as NextJournalInquiryID,",
                                  "    NextStep,",
                                  "    NextStepDate,",
                                  "    NextStepAndDT",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_NextJournalActivity.qvd]",
                                  "(qvd);",
                                  "",
                                  "TempNext:",
                                  "LOAD distinct",
                                  "    %InquiryID,",
                                  "    \u0027None\u0027 as NextStep",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_factInquiryByReferral.qvd]",
                                  "(qvd)",
                                  "Where Not Exists(NextJournalInquiryID, %InquiryID);",
                                  "",
                                  "",
                                  "Concatenate(dimNextJournalActivity)",
                                  "Load * Resident TempNext;",
                                  "Drop Table TempNext;",
                                  "Drop Field NextJournalInquiryID from dimNextJournalActivity;"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "Fact Tables",
        "LoadScriptContent":  [
                                  "///$tab Fact Tables",
                                  "fact_Sales_Dashboard:",
                                  "LOAD 1 as FactType, ",
                                  "*",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_factInquiryByReferral.qvd]",
                                  "(qvd);",
                                  "",
                                  "",
                                  "Concatenate(fact_Sales_Dashboard)",
                                  "LOAD 2 as FactType, ",
                                  "*",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_factUnitOccupancyByMonth.qvd]",
                                  "(qvd);",
                                  "",
                                  "Concatenate(fact_Sales_Dashboard)",
                                  "LOAD 3 as FactType,",
                                  "\t*",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_factRevenueByMoveIn.qvd]",
                                  "(qvd)",
                                  ";",
                                  "",
                                  "",
                                  "Concatenate(fact_Sales_Dashboard)",
                                  "LOAD 4 as FactType, ",
                                  "*",
                                  "FROM [lib://DataShare/QVD Transform\\QVD_Transform_JournalActivity.qvd]",
                                  "(qvd)",
                                  ";",
                                  "",
                                  "",
                                  "Concatenate(fact_Sales_Dashboard)",
                                  "LOAD \u0027Lost\u0027 as FactType, // 1 is Inquiry,",
                                  "    %CommunityKey,",
                                  "    %CustomerIDKey,",
                                  "    %InquiryID,",
                                  "    LastStatusEffectiveDT,",
                                  "    Status,",
                                  "    %OrganizationID,",
                                  "    ContactID,",
                                  "    \"Inquirer Dashboard\",",
                                  "//     %DateKey,",
                                  "    DateOfInquiry,",
                                  "    ActiveCRMStatus,",
                                  "    InquiryStatusDate as LostInquiryStatusDate,",
                                  "    InquiryStatusDate as %DateKey,",
                                  "    InquiryName,",
                                  "    InquiryAddress,",
                                  "    InquiryAddress2,",
                                  "    InquiryCity,",
                                  "    InquiryState,",
                                  "    InquiryPostalCode,",
                                  "    InquiryCountry,",
                                  "    InquiryEmail,",
                                  "    InquiryPhoneHome,",
                                  "    InquiryPhoneWork,",
                                  "    InquiryPhoneCell,",
                                  "    RelationToCustomer,",
                                  "    ReferralBucket,",
                                  "    ReferralBucketShort,",
                                  "    ReferralCategory,",
                                  "    Organization,",
                                  "    ReferredBy,",
                                  "    SecondaryReferralBucket,",
                                  "    SecondaryOrganizationID,",
                                  "    SecondaryOrganization,",
                                  "    SecondaryReferredBy,",
                                  "    IsSelfAssessment,",
                                  "    LostCategory,",
                                  "    LostLocationID,",
                                  "    LostLocation,",
                                  "    LostInfluence,",
                                  "    CompetitorRate,",
                                  "    AllowContactPhoneFlg,",
                                  "    AllowContactMailFlg,",
                                  "    AllowContactEmailFlg,",
                                  "    LivingSituation,",
                                  "    CareType,",
                                  "    PayorType,",
                                  "    InquiryNote,",
                                  "    RoomType,",
                                  "    MoveInDate,",
                                  "    PhysicalMoveInDT,",
                                  "    M_InquiryToTourDays,",
                                  "    InquiryCreateBy,",
                                  "    IsEleadFlg,",
                                  "    InquiryCreateDTandTM,",
                                  "    InquiryCreateDT,",
                                  "    InquiryCreateTime,",
                                  "    HasBiographyNote,",
                                  "    HasObjectionNote,",
                                  "    HasDiscoveryNote,",
                                  "    HasCurrentLivingSituationNote,",
                                  "    HasWhatPromptedSearchNote,",
                                  "    HasBudgetNote,",
                                  "    HasRoomTypeNote,",
                                  "    HasTimeFrameNote,",
                                  "    MinInquiryDT,",
                                  "    InitialTourDate,",
                                  "    M_TotalTours,",
                                  "    M_TotalCalls,",
                                  "    MinCustomerID,",
                                  "    Title,",
                                  "    Suffix,",
                                  "    IsEleadCorporationFlg,",
                                  "    eLeadID,",
                                  "    \"Resident\",",
                                  "    Gender,",
                                  "    DesiredProductInventoryID,",
                                  "    ReservationPayor,",
                                  "    %ReservationIDKey,",
                                  "    ReservationDT,",
                                  "    DesiredRoomNumber,",
                                  "    DesiredDT,",
                                  "    DepositAmount,",
                                  "    ReservationRoomRate,",
                                  "    M_Street,",
                                  "    M_Selling,",
                                  "    ResidentAssessmentCount,",
                                  "    DepositMaxCreateDT,",
                                  "    MaxDepositAmount,",
                                  "    MaxReservationCloseStatus,",
                                  "    MaxReservationCloseReason,",
                                  "    StatusRankCurrent,",
                                  "    StatusLastWeek,",
                                  "    StatusRankLastWeek,",
                                  "    Status30Days,",
                                  "    StatusRank30Days,",
                                  "    Status90Days,",
                                  "    StatusRank90Days,",
                                  "    PotentialDuplicateReason,",
                                  "    TourFlg,",
                                  "    AutoApply",
                                  "FROM [lib://DataShare/QVD Transform/QVD_Transform_factInquiryByReferral.qvd]",
                                  "(qvd)",
                                  "where Status=\u0027Lost\u0027 and Match(LostCategory, \u0027Competitor\u0027);"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "Main",
        "LoadScriptContent":  [
                                  "///$tab Main",
                                  "SET ThousandSep=\u0027,\u0027;",
                                  "SET DecimalSep=\u0027.\u0027;",
                                  "SET MoneyThousandSep=\u0027,\u0027;",
                                  "SET MoneyDecimalSep=\u0027.\u0027;",
                                  "SET MoneyFormat=\u0027$#,##0.00;($#,##0.00)\u0027;",
                                  "SET TimeFormat=\u0027hh:mm:ss.mmm\u0027;",
                                  "SET DateFormat=\u0027M/D/YYYY\u0027;",
                                  "SET TimestampFormat=\u0027M/D/YYYY h:mm:ss[.fff] TT\u0027;",
                                  "SET FirstWeekDay=0;",
                                  "SET BrokenWeeks=1;",
                                  "SET ReferenceDay=0;",
                                  "SET FirstMonthOfYear=1;",
                                  "SET CollationLocale=\u0027en-US\u0027;",
                                  "SET CreateSearchIndexOnReload=0;",
                                  "SET MonthNames=\u0027Jan;Feb;Mar;Apr;May;Jun;Jul;Aug;Sep;Oct;Nov;Dec\u0027;",
                                  "SET LongMonthNames=\u0027January;February;March;April;May;June;July;August;September;October;November;December\u0027;",
                                  "SET DayNames=\u0027Mon;Tue;Wed;Thu;Fri;Sat;Sun\u0027;",
                                  "SET LongDayNames=\u0027Monday;Tuesday;Wednesday;Thursday;Friday;Saturday;Sunday\u0027;",
                                  "",
                                  "SET DISABLE_INSIGHTS=1;",
                                  "SET vTestButton=\u0027New Inquiries\u0027;",
                                  "",
                                  "let vmindate=monthstart(Today(),-11);",
                                  "",
                                  "variables:",
                                  "LOAD",
                                  "    vDivReg",
                                  "FROM [lib://DataShare/QVD Transform/QVD_Transform_variables.qvd]",
                                  "(qvd);",
                                  "",
                                  "Let vDivReg = Peek(\u0027vDivReg\u0027,0,\u0027variables\u0027);",
                                  "",
                                  "Drop Table variables;"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "Section Access",
        "LoadScriptContent":  [
                                  "///$tab Section Access",
                                  "SecurityTEMP:",
                                  "LOAD",
                                  "    \"ACCESS\",",
                                  "    \"USERID\",",
                                  "    COMMUNITYNUMBER",
                                  "FROM [lib://DataShare/QVD Transform/QVD_Transform_SectionAccess.qvd]",
                                  "(qvd);",
                                  "",
                                  "",
                                  "Section Access;",
                                  "",
                                  "Security:",
                                  "NoConcatenate",
                                  "LOAD",
                                  "    \"ACCESS\",",
                                  "    \"USERID\",",
                                  "    COMMUNITYNUMBER",
                                  "Resident SecurityTEMP;",
                                  "",
                                  "Section Application;",
                                  "",
                                  "Drop Table SecurityTEMP;"
                              ]
    },
    {
        "App":  "Sales-Trends",
        "Section":  "tab_order.txt",
        "LoadScriptContent":  [
                                  "Section Access%tab_file_order_divider%Main%tab_file_order_divider%Communities%tab_file_order_divider%Fact Tables%tab_file_order_divider%dimFirstJournalActivity%tab_file_order_divider%dimLastJournalActivity%tab_file_order_divider%dimNextJournalActivity%tab_file_order_divider%dimELeadCreation%tab_file_order_divider%dimDate"
                              ]
    }
]
